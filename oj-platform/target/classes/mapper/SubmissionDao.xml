<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cheerful.oj.platform.dao.SubmissionDao">

    <resultMap type="com.cheerful.oj.platform.entity.Submission" id="SubmissionMap">
        <result property="id" column="id" jdbcType="INTEGER"/>
        <result property="userId" column="user_id" jdbcType="INTEGER"/>
        <result property="nickname" column="nickname" jdbcType="VARCHAR"/>
        <result property="questionId" column="question_id" jdbcType="INTEGER"/>
        <result property="questionTitle" column="question_title" jdbcType="VARCHAR"/>
        <result property="resultCode" column="result_code" jdbcType="INTEGER"/>
        <result property="resultInfo" column="result_info" jdbcType="VARCHAR"/>
        <result property="resultMsg" column="result_msg" jdbcType="VARCHAR"/>
        <result property="timeUsed" column="time_used" jdbcType="VARCHAR"/>
        <result property="memoryUsed" column="memory_used" jdbcType="VARCHAR"/>
        <result property="gmtCreate" column="gmt_create" jdbcType="TIMESTAMP"/>
        <result property="language" column="language" jdbcType="INTEGER"/>
        <result property="resultInfo" column="result_info" jdbcType="VARCHAR"/>
        <result property="fromIp" column="from_ip" jdbcType="VARCHAR"/>
    </resultMap>

    <!-- 批量插入 -->
    <insert id="insertBatch" keyProperty="id" useGeneratedKeys="true">
        insert into oj_ums.ums_submission(user_id, nickname, question_id, question_title, result_code,result_msg,result_info, time_used,
        memory_used, gmt_create, language,, from_ip)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.userId}, #{entity.nickname}, #{entity.questionId}, #{entity.questionTitle}, #{entity.resultCode},
            #{entity.resultMsg},#{entity.resultInfo},#{entity.timeUsed}, #{entity.memoryUsed}, #{entity.gmtCreate}, #{entity.language},
            #{entity.fromIp})
        </foreach>
    </insert>

</mapper>

